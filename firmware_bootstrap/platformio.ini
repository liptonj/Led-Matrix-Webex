; PlatformIO Project Configuration File
; ESP32-S3 Webex Status Display - Bootstrap Firmware
;
; This is a minimal bootstrap firmware that handles:
; - WiFi provisioning (AP mode + SmartConfig)
; - OTA download of the full firmware from GitHub Releases
;
; Size target: < 500KB to leave room for OTA updates

[env:esp32s3]
platform = espressif32
board = esp32-s3-devkitc-1
framework = arduino

; Board configuration for N8R2 variant (8MB Flash, 2MB PSRAM)
board_build.flash_size = 8MB
board_build.partitions = default_8MB.csv

; Build flags
build_flags = 
    -DBOOTSTRAP_VERSION=\"1.0.0\"
    -DBOARD_HAS_PSRAM
    -DARDUINO_USB_CDC_ON_BOOT=1
    -DARDUINO_USB_MODE=1
    ; Default OTA URL - update with actual repo
    -DDEFAULT_OTA_URL=\"https://api.github.com/repos/OWNER/REPO/releases/latest\"

; Upload settings
upload_speed = 921600
monitor_speed = 115200

; Minimal library set - no LED matrix driver
lib_deps = 
    ; JSON parsing
    bblanchon/ArduinoJson@^7.0.0
    ; Async Web Server
    me-no-dev/ESPAsyncWebServer@^1.2.3
    me-no-dev/AsyncTCP@^1.1.1

; File system for web assets
board_build.filesystem = littlefs

; Optimization for size
build_type = release
