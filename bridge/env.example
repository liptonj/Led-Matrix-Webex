# Webex Bridge Server Configuration
# Copy this file to .env and fill in your values

# Webex OAuth2 Credentials (Legacy - not used in pairing mode)
# Get these from https://developer.webex.com/my-apps
WEBEX_CLIENT_ID=your_client_id_here
WEBEX_CLIENT_SECRET=your_client_secret_here
WEBEX_REFRESH_TOKEN=your_refresh_token_here

# WebSocket Server Configuration
WS_PORT=8080

# mDNS Service Name
MDNS_SERVICE_NAME=webex-bridge

# Logging Level (error, warn, info, debug)
LOG_LEVEL=info

# Data Directory (for local device storage fallback)
DATA_DIR=./data

# =============================================================================
# Supabase Configuration (for cloud device management)
# Get these from your Supabase project settings
# =============================================================================

# Supabase Project URL
SUPABASE_URL=https://your-project.supabase.co

# Supabase Service Role Key (NOT the anon key - needs elevated permissions)
# Found in Settings > API > service_role key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here

# =============================================================================
# Authentication Configuration
# =============================================================================

# Whether to require authentication for device/app connections
# When true (default when Supabase is enabled):
#   - Displays must provide valid HMAC signatures
#   - Apps must provide valid JWT tokens from exchange-pairing-code
# Set to "false" to allow unauthenticated connections (not recommended for production)
REQUIRE_DEVICE_AUTH=true

# Secret key for signing app authentication tokens (HS256)
# IMPORTANT: This must match SUPABASE_JWT_SECRET in Supabase Edge Function secrets
# The bridge will also check SUPABASE_JWT_SECRET as a fallback, but both should
# be set to the same value for consistency.
# Generate with: openssl rand -base64 32
BRIDGE_APP_TOKEN_SECRET=your_32_char_secret_here
# Alternative: Set SUPABASE_JWT_SECRET instead (bridge will use it if BRIDGE_APP_TOKEN_SECRET is not set)
# SUPABASE_JWT_SECRET=your_32_char_secret_here

# =============================================================================
# Debug Streaming (deprecated)
# =============================================================================

# Enable legacy bridge-based debug log streaming
# This is deprecated in favor of Supabase Realtime subscriptions
# Set to "true" only for backward compatibility
ENABLE_BRIDGE_DEBUG_SUBSCRIBE=false

# Rate limiting for debug logs (logs per second per device)
# Prevents database overload from high-volume debug logging
# Only applies to info/debug level logs; warn/error are always persisted
DEBUG_LOG_RATE_LIMIT=10
